<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Design of the DEFUSE3 Trial • ASSISTant</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Design of the DEFUSE3 Trial">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ASSISTant</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ASSISTant.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Rankin.html">Using Discrete Rankin Scores</a>
    </li>
    <li>
      <a href="../articles/defuse3.html">Design of the DEFUSE3 Trial</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/bnaras/ASSISTant">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Design of the DEFUSE3 Trial</h1>
                        <h4 class="author">Tze Leung Lai, Philip W. Lavori, Olivia Liao, Ka Wai Tsang and Balasubramanian Narasimhan</h4>
            
            <h4 class="date">2019-04-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/bnaras/ASSISTant/blob/master/vignettes/defuse3.Rmd"><code>vignettes/defuse3.Rmd</code></a></small>
      <div class="hidden name"><code>defuse3.Rmd</code></div>

    </div>

    
    
<div id="continuous-rankin-simulations" class="section level2">
<h2 class="hasAnchor">
<a href="#continuous-rankin-simulations" class="anchor"></a>Continuous Rankin Simulations</h2>
<p>Here, we present the calculations for the initial design of the DEFUSE3 trial based on <span class="citation">(Lai, Lavori, and Liao 2014)</span> and <span class="citation">(Lai, Lavori, and Tsang 2015)</span>. The trial parameters are fixed as follows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ASSISTant)
##Fix randomization vector N, errors, eps
trialParameters &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">N =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">200</span>, <span class="dv">340</span>, <span class="dv">476</span>), <span class="dt">type1Error =</span> <span class="fl">0.025</span>,
                        <span class="dt">eps =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">2</span>, <span class="dt">type2Error =</span> <span class="fl">0.1</span>)</code></pre></div>
<p>The design parameters are the following for various scenarios.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">designParameters &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(
    <span class="dt">nul0 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span><span class="op">/</span><span class="dv">6</span>, <span class="dv">6</span>), <span class="dt">mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">6</span>),
                <span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">6</span>)),
    <span class="dt">alt1 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span><span class="op">/</span><span class="dv">6</span>, <span class="dv">6</span>), <span class="dt">mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">0</span>, <span class="dv">6</span>),
                                                       <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.5</span>, <span class="fl">0.4</span>, <span class="fl">0.3</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)),
                <span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">6</span>)),
    <span class="dt">alt2 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span><span class="op">/</span><span class="dv">6</span>, <span class="dv">6</span>), <span class="dt">mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">0</span>, <span class="dv">6</span>),
                                                     <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)),
                <span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="dv">6</span>)),
    <span class="dt">alt3 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span><span class="op">/</span><span class="dv">6</span>, <span class="dv">6</span>), <span class="dt">mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">0</span>, <span class="dv">6</span>), <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="fl">0.36</span>, <span class="dv">6</span>)),
                <span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="dv">6</span>)),
    <span class="dt">alt4 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span><span class="op">/</span><span class="dv">6</span>, <span class="dv">6</span>), <span class="dt">mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">0</span>, <span class="dv">6</span>), <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="fl">0.30</span>, <span class="dv">6</span>)),
                <span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="dv">6</span>)),
    <span class="dt">alt5 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span><span class="op">/</span><span class="dv">6</span>, <span class="dv">6</span>), <span class="dt">mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">0</span>, <span class="dv">6</span>),
                                                       <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.4</span>, <span class="fl">0.3</span>, <span class="fl">0.2</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)),
                <span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="dv">6</span>)),
    <span class="dt">alt6 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span><span class="op">/</span><span class="dv">6</span>, <span class="dv">6</span>), <span class="dt">mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">0</span>, <span class="dv">6</span>),
                                                       <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.3</span>, <span class="fl">0.3</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>)),
                <span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="dv">6</span>))
)</code></pre></div>
<div id="the-null-scenario" class="section level3">
<h3 class="hasAnchor">
<a href="#the-null-scenario" class="anchor"></a>The NULL Scenario</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">defuse3 &lt;-<span class="st"> </span>DEFUSE3Design<span class="op">$</span><span class="kw">new</span>(<span class="dt">trialParameters =</span> trialParameters,
                             <span class="dt">numberOfSimulations =</span> <span class="dv">500</span>,
                             <span class="dt">designParameters =</span> designParameters<span class="op">$</span>nul0,
                             <span class="dt">showProgress =</span> <span class="ot">FALSE</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(defuse3)</code></pre></div>
<pre><code>## Design Parameters:
##  Number of Groups: 6
##  Prevalence:
## 
##     Group1      Group2      Group3      Group4      Group5      Group6
## ----------  ----------  ----------  ----------  ----------  ----------
##  0.1666667   0.1666667   0.1666667   0.1666667   0.1666667   0.1666667
## 
##  Using Discrete Rankin scores? FALSE
## 
##  Normal Rankin Distribution means (null row, alt. row):
## 
## 
##         Group1   Group2   Group3   Group4   Group5   Group6
## -----  -------  -------  -------  -------  -------  -------
## Null         0        0        0        0        0        0
## Alt          0        0        0        0        0        0
## 
##  Normal Rankin Distribution SDs (null row, alt. row):
## 
## 
##         Group1   Group2   Group3   Group4   Group5   Group6
## -----  -------  -------  -------  -------  -------  -------
## Null         1        1        1        1        1        1
## Alt          1        1        1        1        1        1
## 
## Trial Parameters:
## List of 6
##  $ N                 : num [1:3] 200 340 476
##  $ type1Error        : num 0.025
##  $ eps               : num 0.5
##  $ type2Error        : num 0.1
##  $ effectSize        : num 0.104
##  $ originalEffectSize: num 0.0858
## 
## Boundaries:
## 
## 
##     btilde          b          c
## ----------  ---------  ---------
##  -1.885434   2.590764   2.758372</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result &lt;-<span class="st"> </span>defuse3<span class="op">$</span><span class="kw">explore</span>(<span class="dt">numberOfSimulations =</span> <span class="dv">500</span>,
                          <span class="dt">showProgress =</span> <span class="ot">FALSE</span>,
                          <span class="dt">rngSeed =</span> <span class="dv">28912</span>)
analysis &lt;-<span class="st"> </span>defuse3<span class="op">$</span><span class="kw">analyze</span>(result)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(defuse3<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(analysis))</code></pre></div>
<pre><code>## P(Reject H0_ITT) = 0.002000; P(Reject H0_subgp) = 0.014000; P(Reject H0) = 0.016000
## P(Early stop for efficacy [futility]) = 0.008000 [0.662000]
## Mean [SD] Randomized N = 355.760000 [99.759743]
## 
## Stage at exit (proportion)
## 
## 
##  exitStage   proportion
## ----------  -----------
##          1        0.208
##          2        0.462
##          3        0.330
## 
## Mean [SD] Lost N = 131.356000 [66.434089]
## Mean [SD] Analyzed N = 224.404000 [84.921093]
## 
## Mean loss by futility stage and subgroup
## 
## 
##  FutilityStage   selectedGroup        mean          sd
## --------------  --------------  ----------  ----------
##              1               1   167.20359    4.986172
##              1               2   132.76471    6.999185
##              1               3    99.04082    6.304625
##              1               4    67.68750    5.735875
##              1               5    33.23636    5.319300
##              2               1   280.93333    7.362712
##              2               2   226.78947    6.827875
##              2               3   171.25000   11.804963
##              2               4   116.37500    8.309633
##              2               5    55.08000    5.589574
##              3               1   400.50000    7.187953
##              3               2   304.75000   18.300729
##              3               3   233.50000    7.368853
##              3               4   158.33333   10.016653
##              3               5    80.66667    7.679173
## 
## Chance of each subpopulation rejected
## 
## 
##  group   count   proportion
## ------  ------  -----------
##      1       2        0.004
##      2       2        0.004
##      3       2        0.004
##      4       1        0.002
##      6       1        0.002
## 
## Counts by futility stage and subgroup choice
## 
## 
##  FutilityStage    G1   G2   G3   G4   G5
## --------------  ----  ---  ---  ---  ---
##              1   167   68   49   48   55
##              2    15   19    8   16   25
##              3     4    4    6    3   12
## 
## CI Statistics:
## Overall coverage and coverage for rejections:
## 
##  overall   rejection
## --------  ----------
##    0.984           0
## 
## P(theta_test is in the confidence interval)
## 
## 
##   coverage   selectedCount   rejectedCount
## ----------  --------------  --------------
##  0.9892473             186               2
##  0.9780220              91               2
##  0.9682540              63               2
##  0.9850746              67               1
##  1.0000000              92               0
##  0.0000000               1               1
## NULL</code></pre>
</div>
<div id="the-alt1-scenario" class="section level3">
<h3 class="hasAnchor">
<a href="#the-alt1-scenario" class="anchor"></a>The ALT1 Scenario</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result1 &lt;-<span class="st"> </span>defuse3<span class="op">$</span><span class="kw">explore</span>(<span class="dt">numberOfSimulations =</span> <span class="dv">500</span>,
                           <span class="dt">trueParameters =</span> designParameters<span class="op">$</span>alt1,
                           <span class="dt">showProgress =</span> <span class="ot">FALSE</span>,
                           <span class="dt">rngSeed =</span> <span class="dv">737218</span>)
analysis1 &lt;-<span class="st"> </span>defuse3<span class="op">$</span><span class="kw">analyze</span>(result1)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(defuse3<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(analysis1))</code></pre></div>
<pre><code>## P(Reject H0_ITT) = 0.284000; P(Reject H0_subgp) = 0.558000; P(Reject H0) = 0.842000
## P(Early stop for efficacy [futility]) = 0.436000 [0.018000]
## Mean [SD] Randomized N = 395.776000 [97.950203]
## 
## Stage at exit (proportion)
## 
## 
##  exitStage   proportion
## ----------  -----------
##          1        0.132
##          2        0.322
##          3        0.546
## 
## Mean [SD] Lost N = 135.228000 [109.645375]
## Mean [SD] Analyzed N = 260.548000 [102.724449]
## 
## Mean loss by futility stage and subgroup
## 
## 
##  FutilityStage   selectedGroup        mean          sd
## --------------  --------------  ----------  ----------
##              1               1   167.60417    4.569741
##              1               2   134.41176    7.912850
##              1               3   102.96875    5.474188
##              1               4    68.50000    3.728270
##              1               5    32.28571    3.352327
##              2               1   281.89474    5.404676
##              2               2   226.16667    9.318829
##              2               3   168.87879    8.513803
##              2               4   115.60000    7.604093
##              2               5    57.00000    7.958224
##              3               1   396.46154    6.678515
##              3               2   319.29630    7.700224
##              3               3   236.03125   11.188101
##              3               4   162.05556   10.032138
##              3               5    80.42105    8.408433
## 
## Chance of each subpopulation rejected
## 
## 
##  group   count   proportion
## ------  ------  -----------
##      1      69        0.138
##      2      72        0.144
##      3     105        0.210
##      4      23        0.046
##      5      10        0.020
##      6     142        0.284
## 
## Counts by futility stage and subgroup choice
## 
## 
##  FutilityStage   G1   G2   G3   G4   G5
## --------------  ---  ---  ---  ---  ---
##              1   48   34   32    6    7
##              2   19   24   33   10    4
##              3   13   27   64   18   19
## 
## CI Statistics:
## Overall coverage and coverage for rejections:
## 
##  overall   rejection
## --------  ----------
##    0.158           0
## 
## P(theta_test is in the confidence interval)
## 
## 
##   coverage   selectedCount   rejectedCount
## ----------  --------------  --------------
##  0.1375000              80              69
##  0.1529412              85              72
##  0.1860465             129             105
##  0.3235294              34              23
##  0.6666667              30              10
##  0.0000000             142             142
## NULL</code></pre>
</div>
<div id="the-alt2-scenario" class="section level3">
<h3 class="hasAnchor">
<a href="#the-alt2-scenario" class="anchor"></a>The ALT2 Scenario</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result2 &lt;-<span class="st"> </span>defuse3<span class="op">$</span><span class="kw">explore</span>(<span class="dt">numberOfSimulations =</span> <span class="dv">500</span>,
                           <span class="dt">trueParameters =</span> designParameters<span class="op">$</span>alt2,
                           <span class="dt">showProgress =</span> <span class="ot">FALSE</span>,
                          <span class="dt">rngSeed =</span> <span class="dv">928812</span>)
analysis2 &lt;-<span class="st"> </span>defuse3<span class="op">$</span><span class="kw">analyze</span>(result2)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(defuse3<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(analysis2))</code></pre></div>
<pre><code>## P(Reject H0_ITT) = 0.226000; P(Reject H0_subgp) = 0.620000; P(Reject H0) = 0.846000
## P(Early stop for efficacy [futility]) = 0.438000 [0.014000]
## Mean [SD] Randomized N = 402.488000 [89.064712]
## 
## Stage at exit (proportion)
## 
## 
##  exitStage   proportion
## ----------  -----------
##          1        0.086
##          2        0.366
##          3        0.548
## 
## Mean [SD] Lost N = 165.346000 [118.444978]
## Mean [SD] Analyzed N = 237.142000 [103.804569]
## 
## Mean loss by futility stage and subgroup
## 
## 
##  FutilityStage   selectedGroup        mean          sd
## --------------  --------------  ----------  ----------
##              1               1   166.85294    5.105745
##              1               2   134.47674    6.722616
##              1               3   100.66667    9.232448
##              1               4    67.75000    4.267820
##              1               5    32.00000    2.943920
##              2               1   282.35294    4.872643
##              2               2   227.91935    8.218927
##              2               3   170.80000    7.450578
##              2               4   117.00000    6.164414
##              2               5    60.66667    8.386497
##              3               1   400.30769    8.606050
##              3               2   316.87368   10.026817
##              3               3   242.84211    7.581140
##              3               4   165.00000    8.194074
##              3               5    80.55556    5.052502
## 
## Chance of each subpopulation rejected
## 
## 
##  group   count   proportion
## ------  ------  -----------
##      1      54        0.108
##      2     216        0.432
##      3      27        0.054
##      4      11        0.022
##      5       2        0.004
##      6     113        0.226
## 
## Counts by futility stage and subgroup choice
## 
## 
##  FutilityStage   G1   G2   G3   G4   G5
## --------------  ---  ---  ---  ---  ---
##              1   34   86   15    8    4
##              2   17   62   10    4    3
##              3   13   95   19    8    9
## 
## CI Statistics:
## Overall coverage and coverage for rejections:
## 
##  overall   rejection
## --------  ----------
##    0.154           0
## 
## P(theta_test is in the confidence interval)
## 
## 
##   coverage   selectedCount   rejectedCount
## ----------  --------------  --------------
##  0.1562500              64              54
##  0.1111111             243             216
##  0.3863636              44              27
##  0.4500000              20              11
##  0.8750000              16               2
##  0.0000000             113             113
## NULL</code></pre>
</div>
</div>
<div id="discrete-rankin-simulations" class="section level2">
<h2 class="hasAnchor">
<a href="#discrete-rankin-simulations" class="anchor"></a>Discrete Rankin Simulations</h2>
<div id="the-discretized-scenarios" class="section level3">
<h3 class="hasAnchor">
<a href="#the-discretized-scenarios" class="anchor"></a>The Discretized Scenarios</h3>
<p>The discretized scenarios are designed to generally mimic the trends above in the alternatives. However, we have a problem: we cannot simulatenously match the mean and sd of the alternatives above. (Actually, we can, but not with Rankin scores 0 through 6. The software can easily be modified to generate discrete values where the values are 0 to 6 divided by the standard deviation of the respective distribution, for example.)</p>
<p><em>Also in future versions, I need to allow for more general support values for the scores, not just 0 through 6. Easy to do, but not done yet.</em></p>
<p>Some types of distributions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">null.uniform &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span>, 7L) ## uniform on 7 support points
hourglass &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>)
inverted.hourglass &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>)
bottom.heavy &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>)
bottom.heavier &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>)
bottom.loaded &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>)
top.heavy &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>)
top.heavier &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>)
top.loaded &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">4</span>)</code></pre></div>
<p>It is instructive to see what the means and standard deviations are.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">knitr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(
           <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">sapply</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">null =</span> null.uniform,
                       <span class="dt">hourglass =</span> hourglass,
                       <span class="dt">inv.hourglass =</span> inverted.hourglass,
                       <span class="dt">bot.heavy =</span> bottom.heavy,
                       <span class="dt">bot.heavier =</span> bottom.heavier,
                       <span class="dt">bot.loaded =</span> bottom.loaded,
                       <span class="dt">top.heavy =</span> top.heavy,
                       <span class="dt">top.heavier =</span> top.heavier,
                       <span class="dt">top.loaded =</span> top.loaded),
                  computeMeanAndSD)
       )</code></pre></div>
<table class="table">
<thead><tr class="header">
<th></th>
<th align="right">null</th>
<th align="right">hourglass</th>
<th align="right">inv.hourglass</th>
<th align="right">bot.heavy</th>
<th align="right">bot.heavier</th>
<th align="right">bot.loaded</th>
<th align="right">top.heavy</th>
<th align="right">top.heavier</th>
<th align="right">top.loaded</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>mean</td>
<td align="right">3</td>
<td align="right">3.000000</td>
<td align="right">3.000000</td>
<td align="right">2.400000</td>
<td align="right">2.153846</td>
<td align="right">2.111111</td>
<td align="right">3.600000</td>
<td align="right">3.846154</td>
<td align="right">3.888889</td>
</tr>
<tr class="even">
<td>sd</td>
<td align="right">2</td>
<td align="right">1.858641</td>
<td align="right">2.144761</td>
<td align="right">1.959592</td>
<td align="right">1.874778</td>
<td align="right">1.760331</td>
<td align="right">1.959592</td>
<td align="right">1.874778</td>
<td align="right">1.760331</td>
</tr>
</tbody>
</table>
<p>With this in mind, we can reel off some runs. Phil, you mentioned you wanted <span class="math inline">\(J = 2\)</span>, which I adhere to, below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">designParameters &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(
    <span class="dt">nul0 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span>, <span class="dv">2</span>),
                <span class="dt">ctlDist =</span> null.uniform,
                <span class="dt">trtDist =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">cbind</a></span>(null.uniform,
                                null.uniform)),
    <span class="dt">alt1 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span>, <span class="dv">2</span>), 
                <span class="dt">ctlDist =</span> null.uniform,
                <span class="dt">trtDist =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">cbind</a></span>(top.loaded,
                                null.uniform)),
    <span class="dt">alt2 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span>, <span class="dv">2</span>), 
                <span class="dt">ctlDist =</span> null.uniform,
                <span class="dt">trtDist =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">cbind</a></span>(null.uniform,
                                top.loaded))
)</code></pre></div>
</div>
<div id="the-null-scenario-1" class="section level3">
<h3 class="hasAnchor">
<a href="#the-null-scenario-1" class="anchor"></a>The NULL Scenario</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">discDefuse3 &lt;-<span class="st"> </span>DEFUSE3Design<span class="op">$</span><span class="kw">new</span>(<span class="dt">trialParameters =</span> trialParameters,
                                 <span class="dt">numberOfSimulations =</span> <span class="dv">5000</span>,
                                 <span class="dt">discreteData =</span> <span class="ot">TRUE</span>,
                                 <span class="dt">designParameters =</span> designParameters<span class="op">$</span>nul0,
                                 <span class="dt">showProgress =</span> <span class="ot">FALSE</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(discDefuse3)</code></pre></div>
<pre><code>## Design Parameters:
##  Number of Groups: 2
##  Prevalence:
## 
##  Group1   Group2
## -------  -------
##     0.5      0.5
## 
##  Using Discrete Rankin scores? TRUE
## 
##  Null Rankin Distribution:
## 
##           Prob.
## ---  ----------
## 0     0.1428571
## 1     0.1428571
## 2     0.1428571
## 3     0.1428571
## 4     0.1428571
## 5     0.1428571
## 6     0.1428571
##  Null Distribution Mean: 3.000000, SD: 2.000000
## 
##  Alternative Rankin Distribution:
## 
## 
##          Group1      Group2
## ---  ----------  ----------
## 0     0.1428571   0.1428571
## 1     0.1428571   0.1428571
## 2     0.1428571   0.1428571
## 3     0.1428571   0.1428571
## 4     0.1428571   0.1428571
## 5     0.1428571   0.1428571
## 6     0.1428571   0.1428571
##  Alternative Mean and SD
## 
##         Group1   Group2
## -----  -------  -------
## mean         3        3
## sd           2        2
## 
## Trial Parameters:
## List of 6
##  $ N                 : num [1:3] 200 340 476
##  $ type1Error        : num 0.025
##  $ eps               : num 0.5
##  $ type2Error        : num 0.1
##  $ effectSize        : num 0.106
##  $ originalEffectSize: num 0.0858
## 
## Boundaries:
## 
## 
##     btilde         b          c
## ----------  --------  ---------
##  -1.875887   2.48671   2.467753</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result &lt;-<span class="st"> </span>discDefuse3<span class="op">$</span><span class="kw">explore</span>(<span class="dt">numberOfSimulations =</span> <span class="dv">50</span>,
                              <span class="dt">showProgress =</span> <span class="ot">FALSE</span>,
                              <span class="dt">rngSeed =</span> <span class="dv">3783</span>)
analysis &lt;-<span class="st"> </span>discDefuse3<span class="op">$</span><span class="kw">analyze</span>(result)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(discDefuse3<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(analysis))</code></pre></div>
<pre><code>## P(Reject H0_ITT) = 0.000000; P(Reject H0_subgp) = 0.020000; P(Reject H0) = 0.020000
## P(Early stop for efficacy [futility]) = 0.000000 [0.800000]
## Mean [SD] Randomized N = 305.600000 [106.616995]
## 
## Stage at exit (proportion)
## 
## 
##  exitStage   proportion
## ----------  -----------
##          1         0.44
##          2         0.36
##          3         0.20
## 
## Mean [SD] Lost N = 116.780000 [38.398709]
## Mean [SD] Analyzed N = 188.820000 [86.822054]
## 
## Mean loss by futility stage and subgroup
## 
## 
##  FutilityStage   selectedGroup       mean         sd
## --------------  --------------  ---------  ---------
##              1               1    99.5000   7.452413
##              2               1   165.4286   9.589180
##              3               1   233.6667   4.041452
## 
## Chance of each subpopulation rejected
## 
## 
##  group   count   proportion
## ------  ------  -----------
##      1       1         0.02
## 
## Counts by futility stage and subgroup choice
## 
## 
##  FutilityStage   G1
## --------------  ---
##              1   40
##              2    7
##              3    3
## 
## CI Statistics:
## Overall coverage and coverage for rejections:
## 
##  overall   rejection
## --------  ----------
##        1           1
## 
## P(theta_test is in the confidence interval)
## 
## 
##  coverage   selectedCount   rejectedCount
## ---------  --------------  --------------
##         1              50               1
## NULL</code></pre>
</div>
<div id="the-alt1-scenario-1" class="section level3">
<h3 class="hasAnchor">
<a href="#the-alt1-scenario-1" class="anchor"></a>The ALT1 Scenario</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result1 &lt;-<span class="st"> </span>discDefuse3<span class="op">$</span><span class="kw">explore</span>(<span class="dt">numberOfSimulations =</span> <span class="dv">50</span>,
                               <span class="dt">trueParameters =</span> designParameters<span class="op">$</span>alt1,
                               <span class="dt">showProgress =</span> <span class="ot">FALSE</span>,
                               <span class="dt">rngSeed =</span> <span class="dv">28912</span>)
analysis1 &lt;-<span class="st"> </span>discDefuse3<span class="op">$</span><span class="kw">analyze</span>(result1)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(discDefuse3<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(analysis1))</code></pre></div>
<pre><code>## P(Reject H0_ITT) = 0.520000; P(Reject H0_subgp) = 0.400000; P(Reject H0) = 0.920000
## P(Early stop for efficacy [futility]) = 0.560000 [0.000000]
## Mean [SD] Randomized N = 374.640000 [103.343643]
## 
## Stage at exit (proportion)
## 
## 
##  exitStage   proportion
## ----------  -----------
##          1         0.18
##          2         0.38
##          3         0.44
## 
## Mean [SD] Lost N = 83.040000 [97.380164]
## Mean [SD] Analyzed N = 291.600000 [89.833860]
## 
## Mean loss by futility stage and subgroup
## 
## 
##  FutilityStage   selectedGroup       mean          sd
## --------------  --------------  ---------  ----------
##              1               1   100.5556    9.951270
##              2               1   169.2500    9.673848
##              3               1   233.6364   15.298841
## 
## Chance of each subpopulation rejected
## 
## 
##  group   count   proportion
## ------  ------  -----------
##      1      20         0.40
##      2      26         0.52
## 
## Counts by futility stage and subgroup choice
## 
## 
##  FutilityStage   G1
## --------------  ---
##              1    9
##              2    4
##              3   11
## 
## CI Statistics:
## Overall coverage and coverage for rejections:
## 
##  overall   rejection
## --------  ----------
##        1           1
## 
## P(theta_test is in the confidence interval)
## 
## 
##  coverage   selectedCount   rejectedCount
## ---------  --------------  --------------
##         1              24              20
##         1              26              26
## NULL</code></pre>
</div>
<div id="the-alt2-scenario-1" class="section level3">
<h3 class="hasAnchor">
<a href="#the-alt2-scenario-1" class="anchor"></a>The ALT2 Scenario</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result2 &lt;-<span class="st"> </span>discDefuse3<span class="op">$</span><span class="kw">explore</span>(<span class="dt">numberOfSimulations =</span> <span class="dv">50</span>,
                               <span class="dt">trueParameters =</span> designParameters<span class="op">$</span>alt2,
                               <span class="dt">showProgress =</span> <span class="ot">FALSE</span>,
                               <span class="dt">rngSeed =</span> <span class="dv">931</span>)
analysis2 &lt;-<span class="st"> </span>discDefuse3<span class="op">$</span><span class="kw">analyze</span>(result2)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(discDefuse3<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(analysis2))</code></pre></div>
<pre><code>## P(Reject H0_ITT) = 0.560000; P(Reject H0_subgp) = 0.000000; P(Reject H0) = 0.560000
## P(Early stop for efficacy [futility]) = 0.380000 [0.340000]
## Mean [SD] Randomized N = 336.080000 [106.155035]
## 
## Stage at exit (proportion)
## 
## 
##  exitStage   proportion
## ----------  -----------
##          1         0.30
##          2         0.42
##          3         0.28
## 
## Mean [SD] Lost N = 68.340000 [86.598442]
## Mean [SD] Analyzed N = 267.740000 [129.424757]
## 
## Mean loss by futility stage and subgroup
## 
## 
##  FutilityStage   selectedGroup    mean         sd
## --------------  --------------  ------  ---------
##              1               1   100.8   8.011103
##              2               1   171.0   5.567764
##              3               1   242.4   5.856620
## 
## Chance of each subpopulation rejected
## 
## 
##  group   count   proportion
## ------  ------  -----------
##      2      28         0.56
## 
## Counts by futility stage and subgroup choice
## 
## 
##  FutilityStage   G1
## --------------  ---
##              1   10
##              2    7
##              3    5
## 
## CI Statistics:
## Overall coverage and coverage for rejections:
## 
##  overall   rejection
## --------  ----------
##        1           1
## 
## P(theta_test is in the confidence interval)
## 
## 
##  coverage   selectedCount   rejectedCount
## ---------  --------------  --------------
##         1              22               0
##         1              28              28
## NULL</code></pre>
</div>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-Lai2014191">
<p>Lai, Tze Leung, Philip W. Lavori, and Olivia Yueh-Wen Liao. 2014. “Adaptive Choice of Patient Subgroup for Comparing Two Treatments.” <em>Contemporary Clinical Trials</em> 39 (2): 191–200. doi:<a href="https://doi.org/10.1016/j.cct.2014.09.001">10.1016/j.cct.2014.09.001</a>.</p>
</div>
<div id="ref-Lai201593">
<p>Lai, Tze Leung, Philip W. Lavori, and Ka Wai Tsang. 2015. “Adaptive Design of Confirmatory Trials: Advances and Challenges.” <em>Contemporary Clinical Trials</em> 45, Part A: 93–102. doi:<a href="https://doi.org/10.1016/j.cct.2015.06.007">10.1016/j.cct.2015.06.007</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#continuous-rankin-simulations">Continuous Rankin Simulations</a></li>
      <li><a href="#discrete-rankin-simulations">Discrete Rankin Simulations</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://profiles.stanford.edu/philip-lavori">Philip Lavori</a>, <a href="https://med.stanford.edu/profiles/tho-duc-pham">Olivia Liao</a>, <a href="https://statweb.stanford.edu/~naras">Balasubramanian Narasimhan</a>, Ka Wai Tsang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
