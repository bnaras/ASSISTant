<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Design of the DEFUSE3 Trial • ASSISTant</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Design of the DEFUSE3 Trial">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ASSISTant</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ASSISTant.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/defuse3.html">Design of the DEFUSE3 Trial</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/bnaras/ASSISTant">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Design of the DEFUSE3 Trial</h1>
                        <h4 class="author">Tze Leung Lai, Philip W. Lavori, Olivia Liao, Ka Wai Tsang and Balasubramanian Narasimhan</h4>
            
            <h4 class="date">2019-01-29</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/bnaras/ASSISTant/blob/master/vignettes/defuse3.Rmd"><code>vignettes/defuse3.Rmd</code></a></small>
      <div class="hidden name"><code>defuse3.Rmd</code></div>

    </div>

    
    
<div id="continuous-rankin-simulations" class="section level2">
<h2 class="hasAnchor">
<a href="#continuous-rankin-simulations" class="anchor"></a>Continuous Rankin Simulations</h2>
<p>Here, we present the calculations for the initial design of the DEFUSE3 trial based on <span class="citation">(Lai, Lavori, and Liao 2014)</span> and <span class="citation">(Lai, Lavori, and Tsang 2015)</span>. The trial parameters are fixed as follows.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ASSISTant)
##Fix randomization vector N, errors, eps
trialParameters &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">N =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">200</span>, <span class="dv">340</span>, <span class="dv">476</span>), <span class="dt">type1Error =</span> <span class="fl">0.025</span>,
                        <span class="dt">eps =</span> <span class="dv">1</span><span class="op">/</span><span class="dv">2</span>, <span class="dt">type2Error =</span> <span class="fl">0.1</span>)</code></pre></div>
<p>The design parameters are the following for various scenarios.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">designParameters &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(
    <span class="dt">nul0 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span><span class="op">/</span><span class="dv">6</span>, <span class="dv">6</span>), <span class="dt">mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">6</span>),
                <span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">6</span>)),
    <span class="dt">alt1 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span><span class="op">/</span><span class="dv">6</span>, <span class="dv">6</span>), <span class="dt">mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">0</span>, <span class="dv">6</span>),
                                                       <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.5</span>, <span class="fl">0.4</span>, <span class="fl">0.3</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)),
                <span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">6</span>)),
    <span class="dt">alt2 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span><span class="op">/</span><span class="dv">6</span>, <span class="dv">6</span>), <span class="dt">mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">0</span>, <span class="dv">6</span>),
                                                     <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)),
                <span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="dv">6</span>)),
    <span class="dt">alt3 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span><span class="op">/</span><span class="dv">6</span>, <span class="dv">6</span>), <span class="dt">mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">0</span>, <span class="dv">6</span>), <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="fl">0.36</span>, <span class="dv">6</span>)),
                <span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="dv">6</span>)),
    <span class="dt">alt4 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span><span class="op">/</span><span class="dv">6</span>, <span class="dv">6</span>), <span class="dt">mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">0</span>, <span class="dv">6</span>), <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="fl">0.30</span>, <span class="dv">6</span>)),
                <span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="dv">6</span>)),
    <span class="dt">alt5 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span><span class="op">/</span><span class="dv">6</span>, <span class="dv">6</span>), <span class="dt">mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">0</span>, <span class="dv">6</span>),
                                                       <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.4</span>, <span class="fl">0.3</span>, <span class="fl">0.2</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>)),
                <span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="dv">6</span>)),
    <span class="dt">alt6 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span><span class="op">/</span><span class="dv">6</span>, <span class="dv">6</span>), <span class="dt">mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">0</span>, <span class="dv">6</span>),
                                                       <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="fl">0.3</span>, <span class="fl">0.3</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>)),
                <span class="dt">sd =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="dv">6</span>))
)</code></pre></div>
<div id="the-null-scenario" class="section level3">
<h3 class="hasAnchor">
<a href="#the-null-scenario" class="anchor"></a>The NULL Scenario</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">defuse3 &lt;-<span class="st"> </span>DEFUSE3Design<span class="op">$</span><span class="kw">new</span>(<span class="dt">trialParameters =</span> trialParameters,
                             <span class="dt">numberOfSimulations =</span> <span class="dv">500</span>,
                             <span class="dt">designParameters =</span> designParameters<span class="op">$</span>nul0,
                             <span class="dt">showProgress =</span> <span class="ot">FALSE</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(defuse3)</code></pre></div>
<pre><code>## Design Parameters:
##  Number of Groups: 6
##  Prevalence:
## 
##     Group1      Group2      Group3      Group4      Group5      Group6
## ----------  ----------  ----------  ----------  ----------  ----------
##  0.1666667   0.1666667   0.1666667   0.1666667   0.1666667   0.1666667
## 
##  Using Discrete Rankin scores? FALSE
## 
##  Normal Rankin Distribution means (null row, alt. row):
## 
## 
##         Group1   Group2   Group3   Group4   Group5   Group6
## -----  -------  -------  -------  -------  -------  -------
## Null         0        0        0        0        0        0
## Alt          0        0        0        0        0        0
## 
##  Normal Rankin Distribution SDs (null row, alt. row):
## 
## 
##         Group1   Group2   Group3   Group4   Group5   Group6
## -----  -------  -------  -------  -------  -------  -------
## Null         1        1        1        1        1        1
## Alt          1        1        1        1        1        1
## 
## Trial Parameters:
## List of 6
##  $ N                 : num [1:3] 200 340 476
##  $ type1Error        : num 0.025
##  $ eps               : num 0.5
##  $ type2Error        : num 0.1
##  $ effectSize        : num 0.105
##  $ originalEffectSize: num 0.0858
## 
## Boundaries:
## 
## 
##     btilde          b          c
## ----------  ---------  ---------
##  -1.885924   2.590764   2.758252</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result &lt;-<span class="st"> </span>defuse3<span class="op">$</span><span class="kw">explore</span>(<span class="dt">numberOfSimulations =</span> <span class="dv">500</span>,
                          <span class="dt">showProgress =</span> <span class="ot">FALSE</span>,
                          <span class="dt">rngSeed =</span> <span class="dv">28912</span>)
analysis &lt;-<span class="st"> </span>defuse3<span class="op">$</span><span class="kw">analyze</span>(result)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(defuse3<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(analysis))</code></pre></div>
<pre><code>## P(Reject H0_ITT) = 0.014000; P(Reject H0_subgp) = 0.020000; P(Reject H0) = 0.034000
## P(Early stop for efficacy [futility]) = 0.022000 [0.636000]
## Mean [SD] Randomized N = 359.912000 [98.348814]
## 
## Stage at exit (proportion)
## 
## 
##  exitStage   proportion
## ----------  -----------
##          1        0.190
##          2        0.468
##          3        0.342
## 
## Mean [SD] Lost N = 124.904000 [65.568141]
## Mean [SD] Analyzed N = 235.008000 [92.462720]
## 
## Mean loss by futility stage and subgroup
## 
## 
##  FutilityStage   selectedGroup        mean          sd
## --------------  --------------  ----------  ----------
##              1               1   166.59124    5.699013
##              1               2   133.32927    6.271737
##              1               3    99.91304    7.213648
##              1               4    65.95918    7.085664
##              1               5    33.81356    5.289790
##              2               1   279.72727    6.149649
##              2               2   225.50000    8.115828
##              2               3   167.52941    6.305926
##              2               4   114.36364    9.656839
##              2               5    57.38462    6.499704
##              3               1   407.00000    3.000000
##              3               2   314.00000   15.641824
##              3               3   235.66667    6.282250
##              3               4   157.33333    9.899495
##              3               5    75.47059    9.159132
## 
## Chance of each subpopulation rejected
## 
## 
##  group   count   proportion
## ------  ------  -----------
##      1       3        0.006
##      2       3        0.006
##      3       4        0.008
##      6       7        0.014
## 
## Counts by futility stage and subgroup choice
## 
## 
##  FutilityStage    G1   G2   G3   G4   G5
## --------------  ----  ---  ---  ---  ---
##              1   137   82   46   49   59
##              2    11   16   17   11   26
##              3     3    4    6    9   17
## 
## CI Statistics:
## Overall coverage and coverage for rejections:
## 
##  overall   rejection
## --------  ----------
##    0.966           0
## 
## P(theta_test is in the confidence interval)
## 
## 
##   coverage   selectedCount   rejectedCount
## ----------  --------------  --------------
##  0.9801325             151               3
##  0.9705882             102               3
##  0.9420290              69               4
##  1.0000000              69               0
##  1.0000000             102               0
##  0.0000000               7               7
## NULL</code></pre>
</div>
<div id="the-alt1-scenario" class="section level3">
<h3 class="hasAnchor">
<a href="#the-alt1-scenario" class="anchor"></a>The ALT1 Scenario</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result1 &lt;-<span class="st"> </span>defuse3<span class="op">$</span><span class="kw">explore</span>(<span class="dt">numberOfSimulations =</span> <span class="dv">500</span>,
                           <span class="dt">trueParameters =</span> designParameters<span class="op">$</span>alt1,
                           <span class="dt">showProgress =</span> <span class="ot">FALSE</span>,
                           <span class="dt">rngSeed =</span> <span class="dv">737218</span>)
analysis1 &lt;-<span class="st"> </span>defuse3<span class="op">$</span><span class="kw">analyze</span>(result1)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(defuse3<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(analysis1))</code></pre></div>
<pre><code>## P(Reject H0_ITT) = 0.320000; P(Reject H0_subgp) = 0.490000; P(Reject H0) = 0.810000
## P(Early stop for efficacy [futility]) = 0.426000 [0.020000]
## Mean [SD] Randomized N = 399.384000 [94.724178]
## 
## Stage at exit (proportion)
## 
## 
##  exitStage   proportion
## ----------  -----------
##          1        0.114
##          2        0.332
##          3        0.554
## 
## Mean [SD] Lost N = 129.778000 [111.078376]
## Mean [SD] Analyzed N = 269.606000 [103.777736]
## 
## Mean loss by futility stage and subgroup
## 
## 
##  FutilityStage   selectedGroup        mean          sd
## --------------  --------------  ----------  ----------
##              1               1   167.25000    5.247923
##              1               2   134.09091    5.784482
##              1               3   101.10345    6.656602
##              1               4    67.63636    5.143398
##              1               5    30.33333    7.339391
##              2               1   286.77778    8.437680
##              2               2   228.48148    9.120435
##              2               3   173.29730    9.315056
##              2               4   111.44444    8.383184
##              2               5    48.00000          NA
##              3               1   394.50000    6.317364
##              3               2   316.38710   11.041369
##              3               3   238.37705   11.359524
##              3               4   159.00000   10.151484
##              3               5    77.10000    6.903300
## 
## Chance of each subpopulation rejected
## 
## 
##  group   count   proportion
## ------  ------  -----------
##      1      56        0.112
##      2      77        0.154
##      3      91        0.182
##      4      18        0.036
##      5       3        0.006
##      6     160        0.320
## 
## Counts by futility stage and subgroup choice
## 
## 
##  FutilityStage   G1   G2   G3   G4   G5
## --------------  ---  ---  ---  ---  ---
##              1   44   33   29   11    6
##              2    9   27   37    9    1
##              3   12   31   61   20   10
## 
## CI Statistics:
## Overall coverage and coverage for rejections:
## 
##  overall   rejection
## --------  ----------
##     0.19           0
## 
## P(theta_test is in the confidence interval)
## 
## 
##   coverage   selectedCount   rejectedCount
## ----------  --------------  --------------
##  0.1384615              65              56
##  0.1538462              91              77
##  0.2834646             127              91
##  0.5500000              40              18
##  0.8235294              17               3
##  0.0000000             160             160
## NULL</code></pre>
</div>
<div id="the-alt2-scenario" class="section level3">
<h3 class="hasAnchor">
<a href="#the-alt2-scenario" class="anchor"></a>The ALT2 Scenario</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result2 &lt;-<span class="st"> </span>defuse3<span class="op">$</span><span class="kw">explore</span>(<span class="dt">numberOfSimulations =</span> <span class="dv">500</span>,
                           <span class="dt">trueParameters =</span> designParameters<span class="op">$</span>alt2,
                           <span class="dt">showProgress =</span> <span class="ot">FALSE</span>,
                          <span class="dt">rngSeed =</span> <span class="dv">928812</span>)
analysis2 &lt;-<span class="st"> </span>defuse3<span class="op">$</span><span class="kw">analyze</span>(result2)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(defuse3<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(analysis2))</code></pre></div>
<pre><code>## P(Reject H0_ITT) = 0.188000; P(Reject H0_subgp) = 0.656000; P(Reject H0) = 0.844000
## P(Early stop for efficacy [futility]) = 0.480000 [0.010000]
## Mean [SD] Randomized N = 394.800000 [92.115637]
## 
## Stage at exit (proportion)
## 
## 
##  exitStage   proportion
## ----------  -----------
##          1        0.104
##          2        0.386
##          3        0.510
## 
## Mean [SD] Lost N = 169.014000 [110.365007]
## Mean [SD] Analyzed N = 225.786000 [96.208900]
## 
## Mean loss by futility stage and subgroup
## 
## 
##  FutilityStage   selectedGroup        mean          sd
## --------------  --------------  ----------  ----------
##              1               1   167.39535    5.665852
##              1               2   134.23333    7.012108
##              1               3   102.21739    7.329619
##              1               4    65.33333   12.342339
##              1               5    36.66667    7.637626
##              2               1   283.70588    7.895922
##              2               2   226.32353    9.854829
##              2               3   172.35714    9.145046
##              2               4   117.12500    8.692156
##              2               5    57.00000          NA
##              3               1   392.00000    9.708244
##              3               2   318.08989    9.568699
##              3               3   239.90000   14.275116
##              3               4   160.81818    9.927922
##              3               5    78.00000    9.201449
## 
## Chance of each subpopulation rejected
## 
## 
##  group   count   proportion
## ------  ------  -----------
##      1      61        0.122
##      2     214        0.428
##      3      39        0.078
##      4      10        0.020
##      5       4        0.008
##      6      94        0.188
## 
## Counts by futility stage and subgroup choice
## 
## 
##  FutilityStage   G1   G2   G3   G4   G5
## --------------  ---  ---  ---  ---  ---
##              1   43   90   23    3    3
##              2   17   68   14    8    1
##              3    9   89   20   11    7
## 
## CI Statistics:
## Overall coverage and coverage for rejections:
## 
##  overall   rejection
## --------  ----------
##    0.156           0
## 
## P(theta_test is in the confidence interval)
## 
## 
##   coverage   selectedCount   rejectedCount
## ----------  --------------  --------------
##  0.1159420              69              61
##  0.1336032             247             214
##  0.3157895              57              39
##  0.5454545              22              10
##  0.6363636              11               4
##  0.0000000              94              94
## NULL</code></pre>
</div>
</div>
<div id="discrete-rankin-simulations" class="section level2">
<h2 class="hasAnchor">
<a href="#discrete-rankin-simulations" class="anchor"></a>Discrete Rankin Simulations</h2>
<div id="the-discretized-scenarios" class="section level3">
<h3 class="hasAnchor">
<a href="#the-discretized-scenarios" class="anchor"></a>The Discretized Scenarios</h3>
<p>The discretized scenarios are designed to generally mimic the trends above in the alternatives. However, we have a problem: we cannot simulatenously match the mean and sd of the alternatives above. (Actually, we can, but not with Rankin scores 0 through 6. The software can easily be modified to generate discrete values where the values are 0 to 6 divided by the standard deviation of the respective distribution, for example.)</p>
<p><em>Also in future versions, I need to allow for more general support values for the scores, not just 0 through 6. Easy to do, but not done yet.</em></p>
<p>Some types of distributions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">null.uniform &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span>, 7L) ## uniform on 7 support points
hourglass &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>)
inverted.hourglass &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>)
bottom.heavy &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>)
bottom.heavier &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>)
bottom.loaded &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>)
top.heavy &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>)
top.heavier &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>)
top.loaded &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">4</span>)</code></pre></div>
<p>It is instructive to see what the means and standard deviations are.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">knitr<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/knitr/topics/kable">kable</a></span>(
           <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">sapply</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">null =</span> null.uniform,
                       <span class="dt">hourglass =</span> hourglass,
                       <span class="dt">inv.hourglass =</span> inverted.hourglass,
                       <span class="dt">bot.heavy =</span> bottom.heavy,
                       <span class="dt">bot.heavier =</span> bottom.heavier,
                       <span class="dt">bot.loaded =</span> bottom.loaded,
                       <span class="dt">top.heavy =</span> top.heavy,
                       <span class="dt">top.heavier =</span> top.heavier,
                       <span class="dt">top.loaded =</span> top.loaded),
                  computeMeanAndSD)
       )</code></pre></div>
<table class="table">
<thead><tr class="header">
<th></th>
<th align="right">null</th>
<th align="right">hourglass</th>
<th align="right">inv.hourglass</th>
<th align="right">bot.heavy</th>
<th align="right">bot.heavier</th>
<th align="right">bot.loaded</th>
<th align="right">top.heavy</th>
<th align="right">top.heavier</th>
<th align="right">top.loaded</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>mean</td>
<td align="right">3</td>
<td align="right">3.000000</td>
<td align="right">3.000000</td>
<td align="right">2.400000</td>
<td align="right">2.153846</td>
<td align="right">2.111111</td>
<td align="right">3.600000</td>
<td align="right">3.846154</td>
<td align="right">3.888889</td>
</tr>
<tr class="even">
<td>sd</td>
<td align="right">2</td>
<td align="right">1.858641</td>
<td align="right">2.144761</td>
<td align="right">1.959592</td>
<td align="right">1.874778</td>
<td align="right">1.760331</td>
<td align="right">1.959592</td>
<td align="right">1.874778</td>
<td align="right">1.760331</td>
</tr>
</tbody>
</table>
<p>With this in mind, we can reel off some runs. Phil, you mentioned you wanted <span class="math inline">\(J = 2\)</span>, which I adhere to, below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">designParameters &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(
    <span class="dt">nul0 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span>, <span class="dv">2</span>),
                <span class="dt">ctlDist =</span> null.uniform,
                <span class="dt">trtDist =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">cbind</a></span>(null.uniform,
                                null.uniform)),
    <span class="dt">alt1 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span>, <span class="dv">2</span>), 
                <span class="dt">ctlDist =</span> null.uniform,
                <span class="dt">trtDist =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">cbind</a></span>(top.loaded,
                                null.uniform)),
    <span class="dt">alt2 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(<span class="dt">prevalence =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span>, <span class="dv">2</span>), 
                <span class="dt">ctlDist =</span> null.uniform,
                <span class="dt">trtDist =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">cbind</a></span>(null.uniform,
                                top.loaded))
)</code></pre></div>
</div>
<div id="the-null-scenario-1" class="section level3">
<h3 class="hasAnchor">
<a href="#the-null-scenario-1" class="anchor"></a>The NULL Scenario</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">discDefuse3 &lt;-<span class="st"> </span>DEFUSE3Design<span class="op">$</span><span class="kw">new</span>(<span class="dt">trialParameters =</span> trialParameters,
                                 <span class="dt">numberOfSimulations =</span> <span class="dv">5000</span>,
                                 <span class="dt">discreteData =</span> <span class="ot">TRUE</span>,
                                 <span class="dt">designParameters =</span> designParameters<span class="op">$</span>nul0,
                                 <span class="dt">showProgress =</span> <span class="ot">FALSE</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(discDefuse3)</code></pre></div>
<pre><code>## Design Parameters:
##  Number of Groups: 2
##  Prevalence:
## 
##  Group1   Group2
## -------  -------
##     0.5      0.5
## 
##  Using Discrete Rankin scores? TRUE
## 
##  Null Rankin Distribution:
## 
##           Prob.
## ---  ----------
## 0     0.1428571
## 1     0.1428571
## 2     0.1428571
## 3     0.1428571
## 4     0.1428571
## 5     0.1428571
## 6     0.1428571
##  Null Distribution Mean: 3.000000, SD: 2.000000
## 
##  Alternative Rankin Distribution:
## 
## 
##          Group1      Group2
## ---  ----------  ----------
## 0     0.1428571   0.1428571
## 1     0.1428571   0.1428571
## 2     0.1428571   0.1428571
## 3     0.1428571   0.1428571
## 4     0.1428571   0.1428571
## 5     0.1428571   0.1428571
## 6     0.1428571   0.1428571
##  Alternative Mean and SD
## 
##         Group1   Group2
## -----  -------  -------
## mean         3        3
## sd           2        2
## 
## Trial Parameters:
## List of 6
##  $ N                 : num [1:3] 200 340 476
##  $ type1Error        : num 0.025
##  $ eps               : num 0.5
##  $ type2Error        : num 0.1
##  $ effectSize        : num 0.106
##  $ originalEffectSize: num 0.0858
## 
## Boundaries:
## 
## 
##     btilde          b          c
## ----------  ---------  ---------
##  -1.875418   2.486403   2.467931</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result &lt;-<span class="st"> </span>discDefuse3<span class="op">$</span><span class="kw">explore</span>(<span class="dt">numberOfSimulations =</span> <span class="dv">50</span>,
                              <span class="dt">showProgress =</span> <span class="ot">FALSE</span>,
                              <span class="dt">rngSeed =</span> <span class="dv">3783</span>)
analysis &lt;-<span class="st"> </span>discDefuse3<span class="op">$</span><span class="kw">analyze</span>(result)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(discDefuse3<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(analysis))</code></pre></div>
<pre><code>## P(Reject H0_ITT) = 0.000000; P(Reject H0_subgp) = 0.000000; P(Reject H0) = 0.000000
## P(Early stop for efficacy [futility]) = 0.000000 [0.780000]
## Mean [SD] Randomized N = 319.520000 [104.518769]
## 
## Stage at exit (proportion)
## 
## 
##  exitStage   proportion
## ----------  -----------
##          1         0.36
##          2         0.42
##          3         0.22
## 
## Mean [SD] Lost N = 121.740000 [39.690543]
## Mean [SD] Analyzed N = 197.780000 [85.413828]
## 
## Mean loss by futility stage and subgroup
## 
## 
##  FutilityStage   selectedGroup       mean          sd
## --------------  --------------  ---------  ----------
##              1               1   100.6216    6.861128
##              2               1   165.9000   10.202941
##              3               1   235.0000    6.082763
## 
## Chance of each subpopulation rejected
## 
## 
##  group   count   proportion
## ------  ------  -----------
## 
## Counts by futility stage and subgroup choice
## 
## 
##  FutilityStage   G1
## --------------  ---
##              1   37
##              2   10
##              3    3
## 
## CI Statistics:
## Overall coverage and coverage for rejections:
## 
##  overall   rejection
## --------  ----------
##        1         NaN
## 
## P(theta_test is in the confidence interval)
## 
## 
##  coverage   selectedCount   rejectedCount
## ---------  --------------  --------------
##         1              50               0
## NULL</code></pre>
</div>
<div id="the-alt1-scenario-1" class="section level3">
<h3 class="hasAnchor">
<a href="#the-alt1-scenario-1" class="anchor"></a>The ALT1 Scenario</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result1 &lt;-<span class="st"> </span>discDefuse3<span class="op">$</span><span class="kw">explore</span>(<span class="dt">numberOfSimulations =</span> <span class="dv">50</span>,
                               <span class="dt">trueParameters =</span> designParameters<span class="op">$</span>alt1,
                               <span class="dt">showProgress =</span> <span class="ot">FALSE</span>,
                               <span class="dt">rngSeed =</span> <span class="dv">28912</span>)
analysis1 &lt;-<span class="st"> </span>discDefuse3<span class="op">$</span><span class="kw">analyze</span>(result1)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(discDefuse3<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(analysis1))</code></pre></div>
<pre><code>## P(Reject H0_ITT) = 0.560000; P(Reject H0_subgp) = 0.380000; P(Reject H0) = 0.940000
## P(Early stop for efficacy [futility]) = 0.640000 [0.000000]
## Mean [SD] Randomized N = 355.360000 [106.553763]
## 
## Stage at exit (proportion)
## 
## 
##  exitStage   proportion
## ----------  -----------
##          1         0.24
##          2         0.40
##          3         0.36
## 
## Mean [SD] Lost N = 69.840000 [90.597193]
## Mean [SD] Analyzed N = 285.520000 [108.325142]
## 
## Mean loss by futility stage and subgroup
## 
## 
##  FutilityStage   selectedGroup        mean         sd
## --------------  --------------  ----------  ---------
##              1               1    99.45455   7.501515
##              2               1   172.00000   6.480741
##              3               1   244.28571   9.214378
## 
## Chance of each subpopulation rejected
## 
## 
##  group   count   proportion
## ------  ------  -----------
##      1      19         0.38
##      2      28         0.56
## 
## Counts by futility stage and subgroup choice
## 
## 
##  FutilityStage   G1
## --------------  ---
##              1   11
##              2    4
##              3    7
## 
## CI Statistics:
## Overall coverage and coverage for rejections:
## 
##  overall   rejection
## --------  ----------
##        1           1
## 
## P(theta_test is in the confidence interval)
## 
## 
##  coverage   selectedCount   rejectedCount
## ---------  --------------  --------------
##         1              22              19
##         1              28              28
## NULL</code></pre>
</div>
<div id="the-alt2-scenario-1" class="section level3">
<h3 class="hasAnchor">
<a href="#the-alt2-scenario-1" class="anchor"></a>The ALT2 Scenario</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result2 &lt;-<span class="st"> </span>discDefuse3<span class="op">$</span><span class="kw">explore</span>(<span class="dt">numberOfSimulations =</span> <span class="dv">50</span>,
                               <span class="dt">trueParameters =</span> designParameters<span class="op">$</span>alt2,
                               <span class="dt">showProgress =</span> <span class="ot">FALSE</span>,
                               <span class="dt">rngSeed =</span> <span class="dv">931</span>)
analysis2 &lt;-<span class="st"> </span>discDefuse3<span class="op">$</span><span class="kw">analyze</span>(result2)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(discDefuse3<span class="op">$</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(analysis2))</code></pre></div>
<pre><code>## P(Reject H0_ITT) = 0.540000; P(Reject H0_subgp) = 0.000000; P(Reject H0) = 0.540000
## P(Early stop for efficacy [futility]) = 0.400000 [0.320000]
## Mean [SD] Randomized N = 322.080000 [113.828342]
## 
## Stage at exit (proportion)
## 
## 
##  exitStage   proportion
## ----------  -----------
##          1         0.40
##          2         0.32
##          3         0.28
## 
## Mean [SD] Lost N = 67.340000 [84.259708]
## Mean [SD] Analyzed N = 254.740000 [120.279574]
## 
## Mean loss by futility stage and subgroup
## 
## 
##  FutilityStage   selectedGroup        mean          sd
## --------------  --------------  ----------  ----------
##              1               1    98.38462    6.702468
##              2               1   167.50000   12.476645
##              3               1   236.33333    9.309493
## 
## Chance of each subpopulation rejected
## 
## 
##  group   count   proportion
## ------  ------  -----------
##      2      27         0.54
## 
## Counts by futility stage and subgroup choice
## 
## 
##  FutilityStage   G1
## --------------  ---
##              1   13
##              2    4
##              3    6
## 
## CI Statistics:
## Overall coverage and coverage for rejections:
## 
##  overall   rejection
## --------  ----------
##        1           1
## 
## P(theta_test is in the confidence interval)
## 
## 
##  coverage   selectedCount   rejectedCount
## ---------  --------------  --------------
##         1              23               0
##         1              27              27
## NULL</code></pre>
</div>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-Lai2014191">
<p>Lai, Tze Leung, Philip W. Lavori, and Olivia Yueh-Wen Liao. 2014. “Adaptive Choice of Patient Subgroup for Comparing Two Treatments.” <em>Contemporary Clinical Trials</em> 39 (2): 191–200. doi:<a href="https://doi.org/10.1016/j.cct.2014.09.001">10.1016/j.cct.2014.09.001</a>.</p>
</div>
<div id="ref-Lai201593">
<p>Lai, Tze Leung, Philip W. Lavori, and Ka Wai Tsang. 2015. “Adaptive Design of Confirmatory Trials: Advances and Challenges.” <em>Contemporary Clinical Trials</em> 45, Part A: 93–102. doi:<a href="https://doi.org/10.1016/j.cct.2015.06.007">10.1016/j.cct.2015.06.007</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#continuous-rankin-simulations">Continuous Rankin Simulations</a></li>
      <li><a href="#discrete-rankin-simulations">Discrete Rankin Simulations</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://profiles.stanford.edu/philip-lavori">Philip Lavori</a>, <a href="https://med.stanford.edu/profiles/tho-duc-pham">Olivia Liao</a>, <a href="https://statweb.stanford.edu/~naras">Balasubramanian Narasimhan</a>, Ka Wai Tsang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
